Игрок
==========
| Метод | Описание | OA2 |
| ----- | -------- |:---:|
| [GET /player/info/](player.md#get-playerinfo) | Информация о игроке. | - |
| [PUT /player/online/](player.md#put-playeronline) | Устанавливает статус игрока в онлайн режим на 15 минут. | + |
| [GET /player/violations/](player.md#get-playerviolations) | Информация о нарушениях игрока. | - |
| [POST /player/search/](player.md#post-playersearch) | Поиск игрока. | - |
| [GET /player/chat/](player.md#get-playerchat) | История сообщений игрока в чате. | + |
| [GET /player/commands/](player.md#get-playercommands) | История вызовов игровых команд | + |

## ``` GET /player/info/ ``` 
Вся информация об игроке.

### Параметры запроса
| Параметры | Необходимость | Пояснение |
| --------- | ------------- | --------- |
| name      | Обязательно.  | Ник игрока. |
### Пример запроса
``` 
http://enapi.ru/2.0/player/info/ensiriuswOw/
```
### Пример ответа 
```json 
{
        "level":"7",
        "registration":"1369652283",
        "last_login":"1369652283",
        "forum_topics":"113",
        "forum_posts":"3742",
        "online":"1",
        "logo":"http://ensemplix.ru/images/logos/default.jpg",
        "clan":"Ensemplix",
        "coins":"100000",
        "experience":"1000",
        "played":"10800",
        "prefix":"&EАдминистратор",
        "chat_color":"a",
        "name_color":"c",
        "donate_till":"1369652283",
        "muted":"1369652283",
        "banned":"1369652283"
}
```
### Пояснение параметров ответа
| Параметры | Пояснение |
| --------- | --------- |
| level     | Уровень игрока, который означает его [ранг](player.md#%D0%A0%D0%B0%D0%BD%D0%B3%D0%B8). |
| registration | Время регистрации в unix timestamp. |
| last_login | Время последней авторизации на сайте в unix timestamp. |
| forum_topics | Количество тем на форуме. |
| forum_posts | Количество сообщений на форуме. |
| online | Статус игрока. 1 - на сайте. 0 - оффлайн. |
| logo   | Аватарка игрока |
| clan   | Клан игрока, если игрок состоит в клане. |
| coins  | Баланс койнов у игрока. |
| experience | Всего получено опыта игроком. |
| played | Время проведенное в игре, в секундах. |
| prefix | Префикс игрока, если он есть. |
| chat_color | Цвет чата у игрока, если он есть. |
| name_color | Цвет ника у игрока, если он есть. |
| donate_till | Время до окончания статуса у игрока, если статус покупался. |
| muted | Если игрок получил молчанку, то будет написано время в unix timestamp, когда молчанка спадет.
| banned | Если игрок забанен, то будет написано время в unix timestamp, до разбана.

Что бы молчанка спала, игрок должен написать после истечения срока мута сообщение в чат.
Что бы бан спал, нужно что бы игрок зашел после разбана на сервер.
### Возможные ошибки
| Ошибка | Пояснение |
| ------ | --------- |
| Please provide player. | Укажите ник игрока. |
| Player not exists. | Указанный игрок не существует. |


### Ранги
| Уровень   | Ранг игрока | Пояснение |
|:---------:| ----------- | --------- |
| 1         | Игрок       | Стандартный статус игрока. |
| 2         | Power-Player| Выдается за 50 энсов. |
| 3         | Vip         | Выдается за 200 энсов. |
| 4         | Super-Vip   | Выдается за 400 энсов. |
| 5         | Модератор   | Выдается игрокам, которые были приняты в коллектив Ensemplix |
| 6         | Администратор| Выдается модераторам, которые проявили себя наилучщим образом. |
| 7         | Главный администратор| Выдается если переспать с Сириусом. |

## ``` PUT /player/online/ ``` 
Устанавливает статус игрока в онлайн режим на 15 минут.

### Параметры

| Параметры | Необходимость | Пояснение |
| --------- | ------------- | --------- |
| token     | Обязательно.  | OAuth токен игрока. |

### Пример запроса
``` 
PUT token fds88asfhj

http://enapi.ru/2.0/player/online/
```
### Пример ответа 
```json 
{"success":"1"}
```

### Возможные ошибки
| Ошибка | Пояснение |
| ------ | --------- |
| Please provide token. | Необходимо указать OAuth токен. |
| Incorrect token. | Неправильный OAuth токен. |

## ``` GET /player/violations/ ``` 
Информация о нарушениях игрока, а так же амнистиях.
### Параметры запроса
| Параметры | Необходимость | Пояснение |
| --------- | ------------- | --------- |
| name      | Обязательно.  | Ник игрока. |

### Пример запроса
``` 
http://enapi.ru/2.0/player/violations/ensiriuswOw/
```
### Пример ответа 
```json 
{
        "violation":{
             "admin":"ensiriuswOw",
             "time":"1369652283",
             "operation":"ban",
             "reason":"Проверка",
             "punish_time":"-1"},
        "violtation":{
             "admin":"ensiriuswOw",
             "time":"1369652283",
             "operation":"unban"
        }
}
```
### Пояснение параметров ответа
| Параметры | Пояснение |
| --------- | --------- |
| admin     | Кто совершал операцию. |
| time      | Время в unix timestamp, когда операция была выполнена. |
| operation | Тип операции. Бан, Разбан. Мут, Размут. |
| reason    | Для бана или мута указывается причина. |
| punish_time | Для бана или мута указывается время наказания. -1 у бана означает, что игрок был забанен навсегда. |
### Возможные ошибки
| Ошибка | Пояснение |
| ------ | --------- |
| No violations found. | Не было найдено операций в магазине с пользователям. |
| Please provide player. | Укажите ник игрока. |
| Player not exists. | Указанный игрок не существует. |


## ``` POST /player/search/ ``` 
Поиск игроков.
### Параметры запроса
| Параметры | Необходимость | Пояснение |
| --------- | ------------- | --------- |
| search    | Обязательно.  | Поисквой запроос. |
### Пример запроса
```
POST search ensi

http://enapi.ru/2.0/player/search/
```
### Пример ответа 
```json 
{
    "found":1,
    "players":{
        "ensi",
        "Ensidia",
        "ensientminer",
        "Ensiferum",
        "ENSIiK",
        "EnsiK",
        "ENSIK123",
        "EnsikCool",
        "ensil",
        "Ensiman20010",
        "Ensin",
        "Ensininka",
        "ensiq",
        "ensiq41",
        "ensirius"
    }
}
```
### Пояснение параметров ответа
| Параметры | Пояснение |
| --------- | --------- |
| found     | 1 - если хотя бы один игрок был найден. 0 - ничего не найдено. |
| players   | Список игроков найденных по запросу. |

## ``` GET /player/chat/ ``` 
История сообщений игрока в чате.

| Параметры | Необходимость | Пояснение |
| --------- | ------------- | --------- |
| token     | Обязательно.  | OAuth токен игрока. |
| offset    | Опционально.  | Начало выборки сообщений. |
| limit     | Опционально.  | Количество сообщений. Максимум 100 за раз. |

### Пример запроса
``` 
http://enapi.ru/2.0/player/chat/ensiriuswOw/
```
### Пример ответа 
```json 
{
       "chat":{   
           "message":"Всем привет",
           "time":"1369652283",
           "world":"Sandbox"},
       "chat":{
           "message":"Как у вас дела?",
           "time":"1369652285",
           "world":"Sandbox"
        }
}
```
### Пояснение параметров ответа
| Параметры | Пояснение |
| --------- | --------- |
| message      | Cообщение которое написал игрок |
| time      | Время когда игрок оставил сообщение в unix time stamp. |
| world     | Игровой мир в котором игрок написал сообщение. |
### Возможные ошибки
| Ошибка | Пояснение |
| ------ | --------- |
| No messages found. | Не было найдено операций в магазине с пользователям. |
| Please provide player. | Укажите ник игрока. |
| Player not exists. | Указанный игрок не существует. |


## ``` GET /player/commands/ ``` 
История сообщений игрока в чате.

| Параметры | Необходимость | Пояснение |
| --------- | ------------- | --------- |
| token     | Обязательно.  | OAuth токен игрока. |
| offset    | Опционально.  | Начало выборки сообщений. |
| limit     | Опционально.  | Количество сообщений. Максимум 100 за раз. |

### Пример запроса
``` 
http://enapi.ru/2.0/player/commands/ensiriuswOw/
```
### Пример ответа 
```json 
{
        "command":{
             "message":"/w qw33 сегодня у тебя?",
             "time":"1369652283",
             "world":"Sandbox"},
        "command":{
             "message":"/home qw33",
             "time":"1369652285",
             "world":"Sandbox"
        }
}
```
### Пояснение параметров ответа
| Параметры | Пояснение |
| --------- | --------- |
| message   | Комманда которую выполнил игрок |
| time      | Время когда игрок выполнил команду в unix time stamp. |
| world     | Игровой мир в котором игрок выполнил команду. |

### Возможные ошибки
| Ошибка | Пояснение |
| ------ | --------- |
| No messages found. | Не было найдено операций в магазине с пользователям. |
| Please provide player. | Укажите ник игрока. |
| Player not exists. | Указанный игрок не существует. |




